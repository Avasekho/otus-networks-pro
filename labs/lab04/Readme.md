<h1> Лабораторная работа 4. Проектирование сети </h1> 

<h2> Задачи </h2>

<ol>
  <li> 1. Разработать и задокументировать адресное пространство для лабораторного стенда. </li>
  <li> 2. Настроить ip адреса на каждом активном порту. </li>
  <li> 3. Настроить каждый VPC в каждом офисе в своем VLAN. </li>
  <li> 4. Настроить VLAN/Loopbackup interface управления для сетевых устройств. </li>
  <li> 5. Настроить сети офисов так, чтобы не возникало broadcast штормов, а использование линков было максимально оптимизировано. </li>
  <li> 6. Использовать IPv4. IPv6 по желанию. </li>
</ol>

<h2> Топология </h2>
<img src=https://github.com/Avasekho/otus-networks-pro/blob/main/labs/lab04/topology.png>

<p> - IP-адреса на активных портах настроены.</p> 
<p> - Каждый VPC в отдельном VLAN </p> 
<p> - Для коммутаторов настроен Management VLAN; для маршрутизаторов - Loopback интерфейс </p>
<p> - на коммутаторах SW2-SW5 в МСК настроен Rapid PVST, на маршрутизаторах R12-R13 оба интерфейса объединены в bridge-group, оба бриджа объединены в VRRP. Аналогично на маршрутизаторах R16-R17 в СПб</p>

<h2> Адресное пространство </h2>

<p> Москва - 10.77.0.0/16 </p>

| Устройство |  Интерфейс  |    IPv4-адрес      |       Комментарий        |
|:----------:|:-----------:|:------------------:|:------------------------:|
| VPC1       | Eth0        | 10.77.101.100/24   | VLAN101                  |
| VPC7       | Eth0        | 10.77.107.100/24   | VLAN107                  |
| SW2        | VLAN99      | 10.77.99.2/24      | Management VLAN          |
| SW2        | E0/0        |       -            | SW2 to SW5               |
| SW2        | E0/1        |       -            | SW2 to SW4               |
| SW2        | E0/2        |       -            | SW2 to VPC7              |
| SW3        | VLAN99      | 10.77.99.3/24      | Management VLAN          |
| SW3        | E0/0        |       -            | SW3 to SW4               |
| SW3        | E0/1        |       -            | SW3 to SW5               |
| SW3        | E0/2        |       -            | SW3 to VPC1              |
| SW4        | VLAN99      | 10.77.99.4/24      | Management VLAN          |
| SW4        | E0/0        |       -            | SW4 to SW3               |
| SW4        | E0/1        |       -            | SW4 to SW2               |
| SW4        | E0/2        |       -            | channel-group 1 to SW5   |
| SW4        | E0/3        |       -            | channel-group 1 to SW5   |
| SW4        | E1/0        |       -            | SW4 to R12               |
| SW4        | E1/1        |       -            | SW4 to R13               |
| SW5        | VLAN99      | 10.77.99.5/24      | Management VLAN          |
| SW5        | E0/0        |       -            | SW5 to SW2               |
| SW5        | E0/1        |       -            | SW5 to SW3               |
| SW5        | E0/2        |       -            | channel-group 1 to SW4   |
| SW5        | E0/3        |       -            | channel-group 1 to SW4   |
| SW5        | E1/0        |       -            | SW5 to R13               |
| SW5        | E1/1        |       -            | SW5 to R12               |
| R12        | Loopback1   | 10.77.199.12/32    | R12 Loopback             |
| R12        | E0/0        |       -            | R12 to SW4               |
| R12        | E0/0.99     |       -            | BVI99 to SW4             |
| R12        | E0/0.101    |       -            | BVI101 to SW4            |
| R12        | E0/0.107    |       -            | BVI107 to SW4            |
| R12        | E0/1        |       -            | R12 to SW5               |
| R12        | E0/1.99     |       -            | BVI99 to SW5             |
| R12        | E0/1.101    |       -            | BVI101 to SW5            |
| R12        | E0/1.107    |       -            | BVI107 to SW5            |
| R12        | E0/2        | 10.77.26.1/30      | R12 to R14               |
| R12        | E0/3        | 10.77.25.1/30      | R12 to R15               |
| R12        | BVI99       | 10.77.99.12/24     | vrrp 99 ip 10.77.99.1    |
| R12        | BVI101      | 10.77.101.12/24    | vrrp 101 ip 10.77.101.1  |
| R12        | BVI107      | 10.77.107.12/24    | vrrp 107 ip 10.77.107.1  |
| R13        | Loopback1   | 10.77.199.13/32    | R13 Loopback             |
| R13        | E0/0        |       -            | R13 to SW5               |
| R13        | E0/0.99     |       -            | BVI99 to SW5             |
| R13        | E0/0.101    |       -            | BVI101 to SW5            |
| R13        | E0/0.107    |       -            | BVI107 to SW5            |
| R13        | E0/1        |       -            | R12 to SW4               |
| R13        | E0/1.99     |       -            | BVI99 to SW4             |
| R13        | E0/1.101    |       -            | BVI101 to SW4            |
| R13        | E0/1.107    |       -            | BVI107 to SW4            |
| R13        | E0/2        | 10.77.28.1/30      | R13 to R15               |
| R13        | E0/3        | 10.77.27.1/30      | R13 to R14               |
| R13        | BVI99       | 10.77.99.13/24     | vrrp 99 ip 10.77.99.1    |
| R13        | BVI101      | 10.77.101.13/24    | vrrp 101 ip 10.77.101.1  |
| R13        | BVI107      | 10.77.107.13/24    | vrrp 107 ip 10.77.107.1  |
| R14        | Loopback1   | 10.77.199.14/32    | R14 Loopback             |
| R14        | E0/0        | 10.77.26.2/30      | R14 to R12               |
| R14        | E0/1        | 10.77.27.2/30      | R14 to R13               |
| R14        | E0/2        | 77.58.86.53/30     | R14 to R22               |
| R14        | E0/3        | 10.77.33.1/30      | R14 to R19               |
| R14        | E1/0        | 10.77.29.1/30      | R14 to R15               |
| R15        | Loopback1   | 10.77.199.15/32    | R15 Loopback             |
| R15        | E0/0        | 10.77.28.2/30      | R15 to R13               |
| R15        | E0/1        | 10.77.25.2/30      | R15 to R12               |
| R15        | E0/2        | 89.186.112.105/30  | R15 to R21               |
| R15        | E0/3        | 10.77.35.1/30      | R15 to R20               |
| R15        | E1/0        | 10.77.29.2/30      | R15 to R14               |
| R19        | Loopback1   | 10.77.199.19/32    | R19 Loopback             |
| R19        | E0/0        | 10.77.33.2/30      | R19 to R14               |
| R20        | Loopback1   | 10.77.199.20/32    | R20 Loopback             |
| R20        | E0/0        | 10.77.35.2/30      | R20 to R15               |

<p> Санкт-Петербург - 10.78.0.0/16 </p>

| Устройство |  Интерфейс  |    IPv4-адрес      |       Комментарий        |
|:----------:|:-----------:|:------------------:|:------------------------:|
| VPC8       | Eth0        | 10.78.108.100/24   | VLAN108                  |
| VPC6       | Eth0        | 10.78.106.100/24   | VLAN106                  |
| SW9        | VLAN99      | 10.78.99.9/24      | Management VLAN          |
| SW9        | E0/0        |       -            | channel-group 1 to SW10  |
| SW9        | E0/1        |       -            | channel-group 1 to SW10  |
| SW9        | E0/2        |       -            | SW9 to VPC8              |
| SW9        | E0/3        |       -            | SW9 to R17               |
| SW9        | E1/0        |       -            | SW9 to R16               |
| SW10       | VLAN99      | 10.78.99.10/24     | Management VLAN          |
| SW10       | E0/0        |       -            | channel-group 1 to SW9   |
| SW10       | E0/1        |       -            | channel-group 1 to SW9   |
| SW10       | E0/2        |       -            | SW10 to VPC6             |
| SW10       | E0/3        |       -            | SW10 to R16              |
| SW10       | E1/0        |       -            | SW10 to R17              |
| R16        | Loopback1   | 10.78.199.16/32    | R16 Loopback             |
| R16        | E0/0        |       -            | R16 to SW10              |
| R16        | E0/0.99     |       -            | BVI99 to SW10            |
| R16        | E0/0.106    |       -            | BVI106 to SW10           |
| R16        | E0/0.108    |       -            | BVI108 to SW10           |
| R16        | E0/1        | 10.78.34.1/30      | R16 to R18               |
| R16        | E0/2        |       -            | R16 to SW9               |
| R16        | E0/2.99     |       -            | BVI99 to SW9             |
| R16        | E0/2.106    |       -            | BVI106 to SW9            |
| R16        | E0/2.108    |       -            | BVI108 to SW9            |
| R16        | E0/3        | 10.78.48.1/30      | R16 to R32               |
| R16        | BVI99       | 10.78.99.16/24     | vrrp 99 ip 10.78.99.1    |
| R16        | BVI106      | 10.78.106.16/24    | vrrp 101 ip 10.78.106.1  |
| R16        | BVI108      | 10.78.108.16/24    | vrrp 107 ip 10.78.108.1  |
| R17        | Loopback1   | 10.78.199.17/32    | R17 Loopback             |
| R17        | E0/0        |       -            | R17 to SW9               |
| R17        | E0/0.99     |       -            | BVI99 to SW9             |
| R17        | E0/0.106    |       -            | BVI106 to SW9            |
| R17        | E0/0.108    |       -            | BVI108 to SW9            |
| R17        | E0/1        | 10.78.35.1/30      | R17 to R18               |
| R17        | E0/2        |       -            | R17 to SW10              |
| R17        | E0/2.99     |       -            | BVI99 to SW10            |
| R17        | E0/2.106    |       -            | BVI106 to SW10           |
| R17        | E0/2.108    |       -            | BVI108 to SW10           |
| R17        | BVI99       | 10.78.99.17/24     | vrrp 99 ip 10.78.99.1    |
| R17        | BVI106      | 10.78.106.17/24    | vrrp 101 ip 10.78.106.1  |
| R17        | BVI108      | 10.78.108.17/24    | vrrp 107 ip 10.78.108.1  |
| R18        | Loopback1   | 10.78.199.18/32    | R18 Loopback             |
| R18        | E0/0        | 10.78.34.2/30      | R18 to R16               |
| R18        | E0/1        | 10.78.35.2/30      | R18 to R17               |
| R18        | E0/2        | 111.213.154.177/30 | R18 to R24               |
| R18        | E0/3        | 129.218.17.221/30  | R18 to R26               |
| R32        | Loopback1   | 10.78.199.32/32    | R32 Loopback             |
| R32        | E0/0        | 10.78.48.2/30      | R32 to R16               |


<p> Лабытнаги - 10.89.0.0/16 </p>

| Устройство |  Интерфейс  |    IPv4-адрес      |       Комментарий        |
|:----------:|:-----------:|:------------------:|:------------------------:|
| R27        | Loopback1   | 10.89.199.27/32    | R27 Loopback             |
| R27        | E0/0        | 146.55.30.130/30   | R27 to R25               |

<p> Чокурдах - 10.14.0.0/16 </p>

| Устройство |  Интерфейс  |    IPv4-адрес      |       Комментарий        |
|:----------:|:-----------:|:------------------:|:------------------------:|
| VPC30      | Eth0        | 10.14.130.100/24   | VLAN130                  |
| VPC31      | Eth0        | 10.14.131.100/24   | VLAN131                  |
| R28        | Loopback1   | 10.14.199.28/32    | R28 Loopback             |
| R28        | E0/0        | 24.16.137.254/30   | R28 to R26               |
| R28        | E0/1        | 193.116.238.158/30 | R28 to R25               |
| R28        | E0/2        |       -            | R27 to SW29              |
| R28        | E0/2.99     | 10.14.99.1/24      | R27 to SW29              |
| R28        | E0/2.130    | 10.14.131.1/24     | R27 to SW29              |
| R28        | E0/2.131    | 10.14.131.1/24     | R27 to SW29              |
| SW29       | VLAN99      | 10.14.99.29/24     | Management VLAN          |
| SW29       | E0/0        |       -            | SW29 to VPC30            |
| SW29       | E0/1        |       -            | SW29 to VPC31            |
| SW29       | E0/2        |       -            | SW29 to R28              |

<p> Провайдеры </p>
<p> Ламас </p>

| Устройство |  Интерфейс  |    IPv4-адрес      |       Комментарий        |
|:----------:|:-----------:|:------------------:|:------------------------:|
| R21        | Loopback1   | 10.77.199.21/32    | R21 Loopback             |
| R21        | E0/0        | 89.186.112.106/30  | R21 to R15               |
| R21        | E0/1        | 61.100.104.137/30  | R21 to R22               |
| R21        | E0/2        | 68.146.22.161/30   | R21 to R24               |

<p> Киторн </p>

| Устройство |  Интерфейс  |    IPv4-адрес      |       Комментарий        |
|:----------:|:-----------:|:------------------:|:------------------------:|
| R22        | Loopback1   | 10.77.199.22/32    | R22 Loopback             |
| R22        | E0/0        | 77.58.86.54/30     | R22 to R14               |
| R22        | E0/1        | 61.100.104.138/30  | R22 to R21               |
| R22        | E0/2        | 37.233.53.25/30    | R22 to R23               |

<p> Триада </p>

| Устройство |  Интерфейс  |    IPv4-адрес      |       Комментарий        |
|:----------:|:-----------:|:------------------:|:------------------------:|
| R23        | Loopback1   | 10.77.199.23/32    | R23 Loopback             |
| R23        | E0/0        | 37.233.53.26/30    | R23 to R22               |
| R23        | E0/1        | 13.33.48.1/30      | R23 to R25               |
| R23        | E0/2        | 13.33.47.1/30      | R23 to R24               |
| R24        | Loopback1   | 10.77.199.24/32    | R24 Loopback             |
| R24        | E0/0        | 68.146.22.162/30   | R24 to R21               |
| R24        | E0/1        | 13.33.50.1/30      | R24 to R26               |
| R24        | E0/2        | 13.33.47.2/30      | R24 to R23               |
| R24        | E0/3        | 111.213.154.178/30 | R24 to R18               |
| R25        | Loopback1   | 10.77.199.25/32    | R25 Loopback             |
| R25        | E0/0        | 13.33.48.2/30      | R25 to R23               |
| R25        | E0/1        | 146.55.30.129/30   | R25 to R27               |
| R25        | E0/2        | 13.33.51.1/30      | R25 to R26               |
| R25        | E0/3        | 193.116.238.157/30 | R25 to R28               |
| R26        | Loopback1   | 10.77.199.26/32    | R26 Loopback             |
| R26        | E0/0        | 13.33.50.2/30      | R26 to R24               |
| R26        | E0/1        | 24.16.137.253/30   | R26 to R28               |
| R26        | E0/2        | 13.33.51.2/30      | R26 to R25               |
| R26        | E0/3        | 129.218.17.222/30  | R26 to R18               |
